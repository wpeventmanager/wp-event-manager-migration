jQuery(document).ready(function(n){n(".wp-event-manager-migration-upload-file").on("click",".upload-file",function(){var i=wp.media({title:event_manager_migration_admin.media_box_title,multiple:!1}).on("select",function(){var t=i.state().get("selection").first().toJSON(),e=t.filename,a=e.substr(e.lastIndexOf(".")+1);"-1"!=jQuery.inArray(a,["csv","xlsx"])?(n("span.response_message").removeClass("error"),n("span.response_message").html(t.filename),n("input.file_id").attr("value",t.id),n("input.file_type").attr("value",a),n('input[name="wp_event_manager_migration_upload"]').attr("type","submit")):(n("span.response_message").addClass("error"),n("input.file_id").attr("value",""),n("input.file_type").attr("value",""),n("span.response_message").html(event_manager_migration_admin.file_type_error),n('input[name="wp_event_manager_migration_upload"]').attr("type","button"))}).open()}).on("click",'input[type="button"]',function(){n("span.response_message").addClass("error"),n("span.response_message").html(event_manager_migration_admin.file_type_error)}),n(".wp-event-manager-migration-mapping-form").on("change",".migration_field",function(){var t=n(this).val(),e=n(this).attr("id"),a=n(this).find("option:selected").attr("class");n(this).attr("data-type",a),n(this).attr("data-val",t),1==n(this).closest("tr").find(".add_default_value").prop("checked")&&(n(this).closest("tr").find(".add_default_value").prop("checked",!1),n(this).closest("tr").find('select[class*="default_value_"]').html(""),n(this).closest("tr").find('select[class*="default_value_"]').hide(),n(this).closest("tr").find('input[class*="default_value_"]').val(""),n(this).closest("tr").find('input[class*="default_value_"]').attr("type","hidden")),n("body input."+e).val(""),n("body input."+e).attr("type","hidden"),n(this).closest("tr").find('input[class*="taxonomy_field_"]').val(""),"custom_field"==a?(n("body input."+e).val(""),n("body input."+e).attr("type","text")):"taxonomy"==a?n(this).closest("tr").find('input[class*="taxonomy_field_"]').val(t):(n("body input."+e).val(t),n("body input."+e).attr("type","hidden")),"-1"!=jQuery.inArray(t,["_post_id","_event_organizer_ids","_event_venue_ids"])&&(n(this).closest("tr").find("span.wp-event-manager-migration-help-tip").addClass("show-help-tip"),"_post_id"==t?n(this).closest("tr").find("span.wp-event-manager-migration-help-tip").attr("title",event_manager_migration_admin._post_id):"_event_organizer_ids"==t?n(this).closest("tr").find("span.wp-event-manager-migration-help-tip").attr("title",event_manager_migration_admin._event_organizer_ids):"_event_venue_ids"==t&&n(this).closest("tr").find("span.wp-event-manager-migration-help-tip").attr("title",event_manager_migration_admin._event_venue_ids))}).on("change",".add_default_value",function(){var t=n(this).closest("tr").find(".migration_field").attr("data-type"),e=n(this).closest("tr").find(".migration_field").attr("data-val"),a=n(this).attr("id");if(1==n(this).prop("checked"))if(n("body input."+a).val(""),"taxonomy"==t){n("body select."+a).show();var i={action:"get_migration_terms",taxonomy:e};n.post(event_manager_migration_admin.ajax_url,i,function(t){n("body select."+a).html(t)},"html")}else n("body input."+a).attr("type","text");else n("body input."+a).val(""),n("body input."+a).attr("type","hidden")}).on("change",'select[class*="default_value_"]',function(){var t=n(this).attr("class"),e=n(this).val();n("body input."+t).val(e)})});